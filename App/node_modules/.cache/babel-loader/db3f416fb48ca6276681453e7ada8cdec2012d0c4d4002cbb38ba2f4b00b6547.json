{"ast":null,"code":"import { Chart } from 'chart.js';\nclass ChartManager {\n  constructor(sensorData) {\n    this.sensorData = sensorData;\n    this.charts = {};\n  }\n  initializeCharts(tempHumCtx, airOccCtx) {\n    // Check if historicalData is valid\n    if (!this.sensorData.historicalData || !this.sensorData.historicalData.labels || this.sensorData.historicalData.labels.length === 0) {\n      console.error('No historical data available to initialize charts');\n      return; // Exit early if no data is available\n    }\n\n    // Temperature & Humidity Chart\n    this.charts.tempHum = new Chart(tempHumCtx, {\n      type: 'line',\n      data: {\n        labels: this.sensorData.historicalData.labels,\n        datasets: [{\n          label: 'Temperature (°C)',\n          data: this.sensorData.historicalData.temperature,\n          borderColor: '#3b82f6',\n          backgroundColor: '#93c5fd50',\n          fill: true,\n          tension: 0.4\n        }, {\n          label: 'Humidity (%)',\n          data: this.sensorData.historicalData.humidity,\n          borderColor: '#10b981',\n          backgroundColor: '#6ee7b750',\n          fill: true,\n          tension: 0.4\n        }]\n      },\n      options: this.getChartOptions('Temperature & Humidity Over Time')\n    });\n\n    // Air Quality & Occupancy Chart\n    this.charts.airOcc = new Chart(airOccCtx, {\n      type: 'line',\n      data: {\n        labels: this.sensorData.historicalData.labels,\n        datasets: [{\n          label: 'Air Quality (%)',\n          data: this.sensorData.historicalData.airQuality,\n          borderColor: '#f59e0b',\n          backgroundColor: '#fcd34d50',\n          fill: true,\n          tension: 0.4\n        }, {\n          label: 'People Count',\n          data: this.sensorData.historicalData.peopleCount,\n          borderColor: '#6366f1',\n          backgroundColor: '#a5b4fc50',\n          fill: true,\n          tension: 0.4\n        }]\n      },\n      options: this.getChartOptions('Air Quality & Occupancy Over Time')\n    });\n  }\n  getChartOptions(title) {\n    return {\n      responsive: true,\n      maintainAspectRatio: false,\n      plugins: {\n        title: {\n          display: true,\n          text: title,\n          font: {\n            size: 16,\n            weight: 'normal'\n          }\n        },\n        legend: {\n          position: 'bottom'\n        }\n      },\n      scales: {\n        x: {\n          grid: {\n            display: false\n          }\n        },\n        y: {\n          beginAtZero: true,\n          grid: {\n            color: '#e5e7eb'\n          }\n        }\n      },\n      interaction: {\n        intersect: false,\n        mode: 'index'\n      }\n    };\n  }\n  updateCharts(data, historicalData) {\n    // Ensure historicalData is valid before attempting to update the charts\n    if (!historicalData || !historicalData.labels || historicalData.labels.length === 0) {\n      console.error('Invalid historical data received', historicalData);\n      return; // Exit if the data is invalid\n    }\n\n    // Update Temperature & Humidity Chart\n    this.charts.tempHum.data.labels = historicalData.labels;\n    this.charts.tempHum.data.datasets[0].data = historicalData.temperature;\n    this.charts.tempHum.data.datasets[1].data = historicalData.humidity;\n    this.charts.tempHum.update('none');\n\n    // Update Air Quality & Occupancy Chart\n    this.charts.airOcc.data.labels = historicalData.labels;\n    this.charts.airOcc.data.datasets[0].data = historicalData.airQuality;\n    this.charts.airOcc.data.datasets[1].data = historicalData.peopleCount;\n    this.charts.airOcc.update('none');\n  }\n}\nexport default ChartManager;","map":{"version":3,"names":["Chart","ChartManager","constructor","sensorData","charts","initializeCharts","tempHumCtx","airOccCtx","historicalData","labels","length","console","error","tempHum","type","data","datasets","label","temperature","borderColor","backgroundColor","fill","tension","humidity","options","getChartOptions","airOcc","airQuality","peopleCount","title","responsive","maintainAspectRatio","plugins","display","text","font","size","weight","legend","position","scales","x","grid","y","beginAtZero","color","interaction","intersect","mode","updateCharts","update"],"sources":["C:/Users/mauri/OneDrive/Documents/Programacion/JavaScript/React/retoiot1/src/js/charts.js"],"sourcesContent":["import { Chart } from 'chart.js';\r\n\r\nclass ChartManager {\r\n    constructor(sensorData) {\r\n        this.sensorData = sensorData;\r\n        this.charts = {};\r\n    }\r\n\r\n    initializeCharts(tempHumCtx, airOccCtx) {\r\n        // Check if historicalData is valid\r\n        if (!this.sensorData.historicalData || !this.sensorData.historicalData.labels || this.sensorData.historicalData.labels.length === 0) {\r\n            console.error('No historical data available to initialize charts');\r\n            return; // Exit early if no data is available\r\n        }\r\n\r\n        // Temperature & Humidity Chart\r\n        this.charts.tempHum = new Chart(tempHumCtx, {\r\n            type: 'line',\r\n            data: {\r\n                labels: this.sensorData.historicalData.labels,\r\n                datasets: [\r\n                    {\r\n                        label: 'Temperature (°C)',\r\n                        data: this.sensorData.historicalData.temperature,\r\n                        borderColor: '#3b82f6',\r\n                        backgroundColor: '#93c5fd50',\r\n                        fill: true,\r\n                        tension: 0.4\r\n                    },\r\n                    {\r\n                        label: 'Humidity (%)',\r\n                        data: this.sensorData.historicalData.humidity,\r\n                        borderColor: '#10b981',\r\n                        backgroundColor: '#6ee7b750',\r\n                        fill: true,\r\n                        tension: 0.4\r\n                    }\r\n                ]\r\n            },\r\n            options: this.getChartOptions('Temperature & Humidity Over Time')\r\n        });\r\n\r\n        // Air Quality & Occupancy Chart\r\n        this.charts.airOcc = new Chart(airOccCtx, {\r\n            type: 'line',\r\n            data: {\r\n                labels: this.sensorData.historicalData.labels,\r\n                datasets: [\r\n                    {\r\n                        label: 'Air Quality (%)',\r\n                        data: this.sensorData.historicalData.airQuality,\r\n                        borderColor: '#f59e0b',\r\n                        backgroundColor: '#fcd34d50',\r\n                        fill: true,\r\n                        tension: 0.4\r\n                    },\r\n                    {\r\n                        label: 'People Count',\r\n                        data: this.sensorData.historicalData.peopleCount,\r\n                        borderColor: '#6366f1',\r\n                        backgroundColor: '#a5b4fc50',\r\n                        fill: true,\r\n                        tension: 0.4\r\n                    }\r\n                ]\r\n            },\r\n            options: this.getChartOptions('Air Quality & Occupancy Over Time')\r\n        });\r\n    }\r\n\r\n    getChartOptions(title) {\r\n        return {\r\n            responsive: true,\r\n            maintainAspectRatio: false,\r\n            plugins: {\r\n                title: {\r\n                    display: true,\r\n                    text: title,\r\n                    font: {\r\n                        size: 16,\r\n                        weight: 'normal'\r\n                    }\r\n                },\r\n                legend: {\r\n                    position: 'bottom'\r\n                }\r\n            },\r\n            scales: {\r\n                x: {\r\n                    grid: {\r\n                        display: false\r\n                    }\r\n                },\r\n                y: {\r\n                    beginAtZero: true,\r\n                    grid: {\r\n                        color: '#e5e7eb'\r\n                    }\r\n                }\r\n            },\r\n            interaction: {\r\n                intersect: false,\r\n                mode: 'index'\r\n            }\r\n        };\r\n    }\r\n\r\n    updateCharts(data, historicalData) {\r\n        // Ensure historicalData is valid before attempting to update the charts\r\n        if (!historicalData || !historicalData.labels || historicalData.labels.length === 0) {\r\n            console.error('Invalid historical data received', historicalData);\r\n            return; // Exit if the data is invalid\r\n        }\r\n\r\n        // Update Temperature & Humidity Chart\r\n        this.charts.tempHum.data.labels = historicalData.labels;\r\n        this.charts.tempHum.data.datasets[0].data = historicalData.temperature;\r\n        this.charts.tempHum.data.datasets[1].data = historicalData.humidity;\r\n        this.charts.tempHum.update('none');\r\n\r\n        // Update Air Quality & Occupancy Chart\r\n        this.charts.airOcc.data.labels = historicalData.labels;\r\n        this.charts.airOcc.data.datasets[0].data = historicalData.airQuality;\r\n        this.charts.airOcc.data.datasets[1].data = historicalData.peopleCount;\r\n        this.charts.airOcc.update('none');\r\n    }\r\n}\r\n\r\nexport default ChartManager;\r\n"],"mappings":"AAAA,SAASA,KAAK,QAAQ,UAAU;AAEhC,MAAMC,YAAY,CAAC;EACfC,WAAWA,CAACC,UAAU,EAAE;IACpB,IAAI,CAACA,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACC,MAAM,GAAG,CAAC,CAAC;EACpB;EAEAC,gBAAgBA,CAACC,UAAU,EAAEC,SAAS,EAAE;IACpC;IACA,IAAI,CAAC,IAAI,CAACJ,UAAU,CAACK,cAAc,IAAI,CAAC,IAAI,CAACL,UAAU,CAACK,cAAc,CAACC,MAAM,IAAI,IAAI,CAACN,UAAU,CAACK,cAAc,CAACC,MAAM,CAACC,MAAM,KAAK,CAAC,EAAE;MACjIC,OAAO,CAACC,KAAK,CAAC,mDAAmD,CAAC;MAClE,OAAO,CAAC;IACZ;;IAEA;IACA,IAAI,CAACR,MAAM,CAACS,OAAO,GAAG,IAAIb,KAAK,CAACM,UAAU,EAAE;MACxCQ,IAAI,EAAE,MAAM;MACZC,IAAI,EAAE;QACFN,MAAM,EAAE,IAAI,CAACN,UAAU,CAACK,cAAc,CAACC,MAAM;QAC7CO,QAAQ,EAAE,CACN;UACIC,KAAK,EAAE,kBAAkB;UACzBF,IAAI,EAAE,IAAI,CAACZ,UAAU,CAACK,cAAc,CAACU,WAAW;UAChDC,WAAW,EAAE,SAAS;UACtBC,eAAe,EAAE,WAAW;UAC5BC,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE;QACb,CAAC,EACD;UACIL,KAAK,EAAE,cAAc;UACrBF,IAAI,EAAE,IAAI,CAACZ,UAAU,CAACK,cAAc,CAACe,QAAQ;UAC7CJ,WAAW,EAAE,SAAS;UACtBC,eAAe,EAAE,WAAW;UAC5BC,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE;QACb,CAAC;MAET,CAAC;MACDE,OAAO,EAAE,IAAI,CAACC,eAAe,CAAC,kCAAkC;IACpE,CAAC,CAAC;;IAEF;IACA,IAAI,CAACrB,MAAM,CAACsB,MAAM,GAAG,IAAI1B,KAAK,CAACO,SAAS,EAAE;MACtCO,IAAI,EAAE,MAAM;MACZC,IAAI,EAAE;QACFN,MAAM,EAAE,IAAI,CAACN,UAAU,CAACK,cAAc,CAACC,MAAM;QAC7CO,QAAQ,EAAE,CACN;UACIC,KAAK,EAAE,iBAAiB;UACxBF,IAAI,EAAE,IAAI,CAACZ,UAAU,CAACK,cAAc,CAACmB,UAAU;UAC/CR,WAAW,EAAE,SAAS;UACtBC,eAAe,EAAE,WAAW;UAC5BC,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE;QACb,CAAC,EACD;UACIL,KAAK,EAAE,cAAc;UACrBF,IAAI,EAAE,IAAI,CAACZ,UAAU,CAACK,cAAc,CAACoB,WAAW;UAChDT,WAAW,EAAE,SAAS;UACtBC,eAAe,EAAE,WAAW;UAC5BC,IAAI,EAAE,IAAI;UACVC,OAAO,EAAE;QACb,CAAC;MAET,CAAC;MACDE,OAAO,EAAE,IAAI,CAACC,eAAe,CAAC,mCAAmC;IACrE,CAAC,CAAC;EACN;EAEAA,eAAeA,CAACI,KAAK,EAAE;IACnB,OAAO;MACHC,UAAU,EAAE,IAAI;MAChBC,mBAAmB,EAAE,KAAK;MAC1BC,OAAO,EAAE;QACLH,KAAK,EAAE;UACHI,OAAO,EAAE,IAAI;UACbC,IAAI,EAAEL,KAAK;UACXM,IAAI,EAAE;YACFC,IAAI,EAAE,EAAE;YACRC,MAAM,EAAE;UACZ;QACJ,CAAC;QACDC,MAAM,EAAE;UACJC,QAAQ,EAAE;QACd;MACJ,CAAC;MACDC,MAAM,EAAE;QACJC,CAAC,EAAE;UACCC,IAAI,EAAE;YACFT,OAAO,EAAE;UACb;QACJ,CAAC;QACDU,CAAC,EAAE;UACCC,WAAW,EAAE,IAAI;UACjBF,IAAI,EAAE;YACFG,KAAK,EAAE;UACX;QACJ;MACJ,CAAC;MACDC,WAAW,EAAE;QACTC,SAAS,EAAE,KAAK;QAChBC,IAAI,EAAE;MACV;IACJ,CAAC;EACL;EAEAC,YAAYA,CAAClC,IAAI,EAAEP,cAAc,EAAE;IAC/B;IACA,IAAI,CAACA,cAAc,IAAI,CAACA,cAAc,CAACC,MAAM,IAAID,cAAc,CAACC,MAAM,CAACC,MAAM,KAAK,CAAC,EAAE;MACjFC,OAAO,CAACC,KAAK,CAAC,kCAAkC,EAAEJ,cAAc,CAAC;MACjE,OAAO,CAAC;IACZ;;IAEA;IACA,IAAI,CAACJ,MAAM,CAACS,OAAO,CAACE,IAAI,CAACN,MAAM,GAAGD,cAAc,CAACC,MAAM;IACvD,IAAI,CAACL,MAAM,CAACS,OAAO,CAACE,IAAI,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACD,IAAI,GAAGP,cAAc,CAACU,WAAW;IACtE,IAAI,CAACd,MAAM,CAACS,OAAO,CAACE,IAAI,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACD,IAAI,GAAGP,cAAc,CAACe,QAAQ;IACnE,IAAI,CAACnB,MAAM,CAACS,OAAO,CAACqC,MAAM,CAAC,MAAM,CAAC;;IAElC;IACA,IAAI,CAAC9C,MAAM,CAACsB,MAAM,CAACX,IAAI,CAACN,MAAM,GAAGD,cAAc,CAACC,MAAM;IACtD,IAAI,CAACL,MAAM,CAACsB,MAAM,CAACX,IAAI,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACD,IAAI,GAAGP,cAAc,CAACmB,UAAU;IACpE,IAAI,CAACvB,MAAM,CAACsB,MAAM,CAACX,IAAI,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACD,IAAI,GAAGP,cAAc,CAACoB,WAAW;IACrE,IAAI,CAACxB,MAAM,CAACsB,MAAM,CAACwB,MAAM,CAAC,MAAM,CAAC;EACrC;AACJ;AAEA,eAAejD,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}